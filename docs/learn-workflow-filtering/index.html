<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163137879-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163137879-1")</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163137879-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-163137879-1")</script>

<title data-react-helmet="true">Filtering Workflows | Temporal</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Filtering Workflows | Temporal"><meta data-react-helmet="true" name="description" content="Temporal supports creating workflows with customized key-value pairs, updating the information within the workflow code, and then listing/searching workflows with a SQL-like query. For example, you can create workflows with keys `city` and `age`, then search all workflows with `city = seattle and age &gt; 22`."><meta data-react-helmet="true" property="og:description" content="Temporal supports creating workflows with customized key-value pairs, updating the information within the workflow code, and then listing/searching workflows with a SQL-like query. For example, you can create workflows with keys `city` and `age`, then search all workflows with `city = seattle and age &gt; 22`."><meta data-react-helmet="true" property="og:url" content="https://temporal-documentation-legacy-v2.github.io/docs/learn-workflow-filtering">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg">


<link rel="stylesheet" href="/styles.253e64a9.css">


<link rel="preload" href="/styles.2e8c563f.js" as="script">

<link rel="preload" href="/runtime~main.58e15fa6.js" as="script">

<link rel="preload" href="/main.86236126.js" as="script">

<link rel="preload" href="/1.56a960ad.js" as="script">

<link rel="preload" href="/2.baf85c20.js" as="script">

<link rel="preload" href="/3.f2c34b4a.js" as="script">

<link rel="preload" href="/1be78505.8ca3838c.js" as="script">

<link rel="preload" href="/20ac7829.55ca918f.js" as="script">

<link rel="preload" href="/17896441.3aca8210.js" as="script">

<link rel="preload" href="/7ada7aca.0717089f.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/favicon.svg" alt="My Site Logo"><strong class="navbar__title">Temporal</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Docs</a><a activeclassname="navbar__link--active" to="https://temporal.io/careers" class="navbar__item navbar__link" href="https://temporal.io/careers">Jobs</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/temporalio/temporal" class="navbar__item navbar__link">GitHub</a><a target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw" class="navbar__item navbar__link">Slack</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/favicon.svg" alt="My Site Logo"><strong class="navbar__title">Temporal</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview">Docs</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" to="https://temporal.io/careers" class="menu__link" href="https://temporal.io/careers">Jobs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/temporalio/temporal" class="menu__link">GitHub</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw" class="menu__link">Slack</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/license">MIT License</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installing-server">Installing Temporal</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-sdk-video-tutorial">SDK Video Tutorial</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-periodic">Periodic Execution</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-orchestration">Microservice Orchestration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-polling">Polling</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-event-driven">Event Driven Application</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-partitioned-scan">Storage Scan</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-batch-job">Batch Job</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-provisioning">Infrastructure Provisioning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-cicd">CI/CD</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-operational-management">Operational Management</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-interactive">Interactive Application</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-dsl">DSL Workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/use-cases-big-ml">Big Data and ML</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Learn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/learn-glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-workflows">Workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-activities">Activities</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-events">Events</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-queries">Queries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-topology">Deployment Topology</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-task-lists">Task Lists</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-server-configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-archival">Archival</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learn-cross-dc-replication">Cross-DC Replication</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/learn-workflow-filtering">Filtering Workflows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/java-quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-workflow-interface">Workflow Interface</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-implementing-workflows">Implementing Workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-starting-workflow-executions">Starting workflow executions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-activity-interface">Activity Interface</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-implementing-activities">Implementing activities</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/java-distributed-cron">Distributed CRON</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Go SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/go-quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-workers">Worker Service</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-create-workflows">Creating Workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-activities">Activities</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-execute-activity">Executing Activities</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-child-workflows">Child Workflows</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-retries">Activity and Workflow Retries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-signals">Signals</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-continue-as-new">ContinueAsNew</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-side-effect">SideEffect</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-queries">Queries</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-activity-async-completion">Asynchronous Activity Completion</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-workflow-testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-sessions">Sessions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-distributed-cron">Distributed CRON</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/go-tracing">Tracing and Context Propagation</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Filtering Workflows</h1></header><div class="markdown"><p>Temporal supports creating workflows with customized key-value pairs, updating the information within the workflow code, and then listing/searching workflows with a SQL-like query. For example, you can create workflows with keys <code>city</code> and <code>age</code>, then search all workflows with <code>city = seattle and age &gt; 22</code>.</p><p>Also note that normal workflow properties like start time and workflow type can be queried as well. For example, the following query could be specified when <a href="/docs/08_cli#list-closed-or-open-workflow-executions">listing workflows from the CLI</a> or using the list APIs (<a href="https://pkg.go.dev/go.temporal.io/temporal/client#Client">Go</a>, <a href="https://static.javadoc.io/com.uber.cadence/cadence-client/2.6.0/com/uber/cadence/WorkflowService.Iface.html#ListWorkflowExecutions-com.uber.cadence.ListWorkflowExecutionsRequest-">Java</a>):</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-sql codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">WorkflowType </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;main.Workflow&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">and</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">Status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">and</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">StartTime </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2019-06-07T16:46:34-08:00&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">or</span><span class="token plain"> CloseTime </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2019-06-07T16:46:34-08:00&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">order</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">by</span><span class="token plain"> StartTime </span><span class="token keyword" style="font-style:italic">desc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="memo-vs-search-attributes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#memo-vs-search-attributes" title="Direct link to heading">#</a>Memo vs Search Attributes</h2><p>Temporal offers two methods for creating workflows with key-value pairs: memo and search attributes. Memo can only be provided on workflow start. Also, memo data are not indexed, and are therefore not searchable. Memo data are visible when listing workflows using the list APIs. Search attributes data are indexed so you can search workflows by querying on these attributes. However, search attributes require the use of Elasticsearch.</p><p>Memo and search attributes are available in the Go client in <a href="https://pkg.go.dev/go.temporal.io/temporal/internal#StartWorkflowOptions">StartWorkflowOptions</a>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> StartWorkflowOptions </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Memo - Optional non-indexed info that will be shown in list workflow.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Memo </span><span class="token keyword" style="font-style:italic">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// SearchAttributes - Optional indexed info that can be used in query of List/Scan/Count workflow APIs (only</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// supported when Temporal server is using Elasticsearch). The key and value type must be registered on Temporal server side.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Use GetSearchAttributes API to get valid key and corresponding value type.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SearchAttributes </span><span class="token keyword" style="font-style:italic">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>In the Java client, the <em>WorkflowOptions.Builder</em> has similar methods for <a href="https://static.javadoc.io/com.uber.cadence/cadence-client/2.6.0/com/uber/cadence/client/WorkflowOptions.Builder.html#setMemo-java.util.Map-">memo</a> and <a href="https://static.javadoc.io/com.uber.cadence/cadence-client/2.6.0/com/uber/cadence/client/WorkflowOptions.Builder.html#setSearchAttributes-java.util.Map-">search attributes</a>.</p><p>Some important distinctions between memo and search attributes:</p><ul><li>Memo can support all data types because it is not indexed. Search attributes only support basic data types (including String, Int, Float, Bool, Datetime) because it is indexed by Elasticsearch.</li><li>Memo does not restrict on key names. Search attributes require that keys are allowlisted before using them because Elasticsearch has a limit on indexed keys.</li><li>Memo doesn&#x27;t require Temporal clusters to depend on Elasticsearch while search attributes only works with Elasticsearch.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="search-attributes-go-client-usage"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#search-attributes-go-client-usage" title="Direct link to heading">#</a>Search Attributes (Go Client Usage)</h2><p>When using the Temporal Go client, provide key-value pairs as SearchAttributes in <a href="https://pkg.go.dev/go.temporal.io/temporal/internal#StartWorkflowOptions">StartWorkflowOptions</a>.</p><p>SearchAttributes is <code>map[string]interface{}</code> where the keys need to be allowlisted so that Temporal knows the attribute key name and value type. The value provided in the map must be the same type as registered.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="allow-listing-search-attributes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#allow-listing-search-attributes" title="Direct link to heading">#</a>Allow Listing Search Attributes</h3><p>Start by querying the list of search attributes using the CLI:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ tctl --namespace samples-namespace cl get-search-attr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------+------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">         KEY         </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> VALUE TYPE </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------+------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Status              </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CloseTime           </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomBoolField     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> DOUBLE     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomDatetimeField </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> DATETIME   </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomNamespace     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomDoubleField   </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> BOOL       </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomIntField      </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomKeywordField  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> CustomStringField   </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> STRING     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> NamespaceId         </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> ExecutionTime       </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> HistoryLength       </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> RunId               </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> StartTime           </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> INT        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> WorkflowId          </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> WorkflowType        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> KEYWORD    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------+------------+</span></div></div></div></div></div><p>Use the admin CLI to add a new search attribute:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --namespace samples-namespace adm cl asa --search_attr_key NewKey --search_attr_type </span><span class="token number" style="color:rgb(247, 140, 108)">1</span></div></div></div></div></div><p>The numbers for the attribute types map as follows:</p><ul><li>0 = String</li><li>1 = Keyword</li><li>2 = Int</li><li>3 = Double</li><li>4 = Bool</li><li>5 = DateTime</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="keyword-vs-string"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#keyword-vs-string" title="Direct link to heading">#</a>Keyword vs String</h4><p>Note that <strong>Keyword</strong> and <strong>String</strong> are concepts taken from Elasticsearch. Each word in a <strong>String</strong> is considered a searchable keyword. For a UUID, that can be problematic as Elasticsearch will index each portion of the UUID separately. To have the whole string considered as a searchable keyword, use the <strong>Keyword</strong> type.</p><p>For example, key RunId with value &quot;2dd29ab7-2dd8-4668-83e0-89cae261cfb1&quot;</p><ul><li>as a <strong>Keyword</strong> will only be matched by RunId = &quot;2dd29ab7-2dd8-4668-83e0-89cae261cfb1&quot; (or in the future with <a href="https://github.com/uber/cadence/issues/1137">regular expressions</a>)</li><li>as a <strong>String</strong> will be matched by RunId =  &quot;2dd8&quot;, which may cause unwanted matches</li></ul><p><strong>Note:</strong> String type can not be used in Order By query.</p><p>There are some pre-allowlisted search attributes that are handy for testing:</p><ul><li>CustomKeywordField</li><li>CustomIntField</li><li>CustomDoubleField</li><li>CustomBoolField</li><li>CustomDatetimeField</li><li>CustomStringField</li></ul><p>Their types are indicated in their names.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="value-types"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#value-types" title="Direct link to heading">#</a>Value Types</h3><p>Here are the Search Attribute value types and their correspondent Golang types:</p><ul><li>Keyword = string</li><li>Int = int64</li><li>Double = float64</li><li>Bool = bool</li><li>Datetime = time.Time</li><li>String = string</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="limit"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#limit" title="Direct link to heading">#</a>Limit</h3><p>We recommend limiting the number of Elasticsearch indexes by enforcing limits on the following:</p><ul><li>Number of keys: 100 per workflow</li><li>Size of value: 2kb per value</li><li>Total size of key and values: 40kb per workflow</li></ul><p>Temporal reserves keys like NamespaceId, WorkflowId, and RunId. These can only be used in list queries. The values are not updatable.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="upsert-search-attributes-in-workflow"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#upsert-search-attributes-in-workflow" title="Direct link to heading">#</a>Upsert Search Attributes in Workflow</h3><p><a href="https://pkg.go.dev/go.temporal.io/temporal/workflow#UpsertSearchAttributes">UpsertSearchAttributes</a> is used to add or update search attributes from within the workflow code.</p><p>Go samples for search attributes can be found at <a href="https://github.com/temporalio/temporal-go-samples/tree/master/searchattributes">github.com/temporalio/temporal-go-samples</a>.</p><p>UpsertSearchAttributes will merge attributes to the existing map in the workflow. Consider this example workflow code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">MyWorkflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> input </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attr1 </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomIntField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomBoolField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">UpsertSearchAttributes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> attr1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attr2 </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomIntField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomKeywordField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;seattle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">UpsertSearchAttributes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> attr2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>After the second call to UpsertSearchAttributes, the map will contain:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-go codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomIntField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomBoolField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CustomKeywordField&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;seattle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>There is no support for removing a field. To achieve a similar effect, set the field to a sentinel value. For example, to remove “CustomKeywordField”, update it to “impossibleVal”. Then searching <code>CustomKeywordField != ‘impossibleVal’</code>  will match workflows with CustomKeywordField not equal to &quot;impossibleVal&quot;, which <strong>includes</strong> workflows without the CustomKeywordField set.</p><p>Use <code>workflow.GetInfo</code> to get current search attributes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="continueasnew-and-cron"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#continueasnew-and-cron" title="Direct link to heading">#</a>ContinueAsNew and Cron</h3><p>When performing a <a href="/docs/07_go_sdk/09_continueasnew">ContinueAsNew</a> or using <a href="/docs/07_go_sdk/16_distributed_cron">Cron</a>, search attributes (and memo) will be carried over to the new run by default.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="query-capabilities"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-capabilities" title="Direct link to heading">#</a>Query Capabilities</h2><p>Query workflows by using a SQL-like where clause when <a href="/docs/08_cli#list-closed-or-open-workflow-executions">listing workflows from the CLI</a> or using the list APIs (<a href="https://pkg.go.dev/go.temporal.io/temporal/client#Client">Go</a>, <a href="https://static.javadoc.io/com.uber.cadence/cadence-client/2.6.0/com/uber/cadence/WorkflowService.Iface.html#ListWorkflowExecutions-com.uber.cadence.ListWorkflowExecutionsRequest-">Java</a>).</p><p>Note that you will only see workflows from one namespace when querying.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="supported-operators"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#supported-operators" title="Direct link to heading">#</a>Supported Operators</h3><ul><li>AND, OR, ()</li><li>=, !=, &gt;, &gt;=, &lt;, &lt;=</li><li>IN</li><li>BETWEEN ... AND</li><li>ORDER BY</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="default-attributes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#default-attributes" title="Direct link to heading">#</a>Default Attributes</h3><p>These can be found by using the CLI get-search-attr command or the GetSearchAttributes API. The names and types are as follows:</p><table><thead><tr><th>KEY</th><th>VALUE TYPE</th></tr></thead><tbody><tr><td>Status</td><td>INT</td></tr><tr><td>CloseTime</td><td>INT</td></tr><tr><td>CustomBoolField</td><td>DOUBLE</td></tr><tr><td>CustomDatetimeField</td><td>DATETIME</td></tr><tr><td>CustomNamespace</td><td>KEYWORD</td></tr><tr><td>CustomDoubleField</td><td>BOOL</td></tr><tr><td>CustomIntField</td><td>INT</td></tr><tr><td>CustomKeywordField</td><td>KEYWORD</td></tr><tr><td>CustomStringField</td><td>STRING</td></tr><tr><td>NamespaceId</td><td>KEYWORD</td></tr><tr><td>ExecutionTime</td><td>INT</td></tr><tr><td>HistoryLength</td><td>INT</td></tr><tr><td>RunId</td><td>KEYWORD</td></tr><tr><td>StartTime</td><td>INT</td></tr><tr><td>WorkflowId</td><td>KEYWORD</td></tr><tr><td>WorkflowType</td><td>KEYWORD</td></tr></tbody></table><p>There are some special considerations for these attributes:</p><ul><li>Status, CloseTime, NamespaceId, ExecutionTime, HistoryLength, RunId, StartTime, WorkflowId, WorkflowType are reserved by Temporal and are read-only</li><li>Status is a mapping of int to state:<ul><li>0 = unknown</li><li>1 = running</li><li>2 = completed</li><li>3 = failed</li><li>4 = canceled</li><li>5 = terminated</li><li>6 = continuedasnew</li><li>7 = timedout</li></ul></li><li>StartTime, CloseTime and ExecutionTime are stored as INT, but support queries using both EpochTime in nanoseconds, and string in RFC3339 format (ex. &quot;2006-01-02T15:04:05+07:00&quot;)</li><li>CloseTime, HistoryLength are only present in closed workflow</li><li>ExecutionTime is for Retry/Cron user to query a workflow that will run in the future</li></ul><p>To list only open workflows, add <code>CloseTime = missing</code> to the end of the query.</p><p>If you use retry or the cron feature to query workflows that will start execution in a certain time range, you can add predicates on ExecutionTime. For example: <code>ExecutionTime &gt; 2019-01-01T10:00:00-07:00</code>. Note that if predicates on ExecutionTime are included, only cron or a workflow that needs to retry will be returned.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="general-notes-about-queries"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#general-notes-about-queries" title="Direct link to heading">#</a>General Notes About Queries</h3><ul><li>Pagesize default is 1000, and cannot be larger than 10k</li><li>Range query on Temporal timestamp (StartTime, CloseTime, ExecutionTime) cannot be larger than 9223372036854775807 (maxInt64 - 1001)</li><li>Query by time range will have 1ms resolution</li><li>Query column names are case sensitive</li><li>ListWorkflow may take longer when retrieving a large number of workflows (10M+)</li><li>To retrieve a large number of workflows without caring about order, use the ScanWorkflow API</li><li>To efficiently count the number of workflows, use the CountWorkflow API</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="tools-support"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tools-support" title="Direct link to heading">#</a>Tools Support</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="cli"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#cli" title="Direct link to heading">#</a>CLI</h3><p>Support for search attributes is available as of version 0.6.0 of the Temporal server. You can also use the CLI from the latest <a href="https://hub.docker.com/r/temporalio/tctl">CLI Docker image</a> (supported on 0.6.4 or later).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="start-workflow-with-search-attributes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#start-workflow-with-search-attributes" title="Direct link to heading">#</a>Start Workflow with Search Attributes</h4><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --ns samples-namespace workflow start --tl helloWorldGroup --wt main.Workflow --et </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"> --dt </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&quot;vancexu&quot;&#x27;</span><span class="token plain"> -search_attr_key </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;CustomIntField | CustomKeywordField | CustomStringField |  CustomBoolField | CustomDatetimeField&#x27;</span><span class="token plain"> -search_attr_value </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;5 | keyword1 | vancexu test | true | 2019-06-07T16:16:36-08:00&#x27;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="search-workflows-with-list-api"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#search-workflows-with-list-api" title="Direct link to heading">#</a>Search Workflows with List API</h4><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --ns samples-namespace wf list -q </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;(CustomKeywordField = &quot;keyword1&quot; and CustomIntField &gt;= 5) or CustomKeywordField = &quot;keyword2&quot;&#x27;</span><span class="token plain"> -psa</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --ns samples-namespace wf list -q </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;CustomKeywordField in (&quot;keyword2&quot;, &quot;keyword1&quot;) and CustomIntField &gt;= 5 and CloseTime between &quot;2018-06-07T16:16:36-08:00&quot; and &quot;2019-06-07T16:46:34-08:00&quot; order by CustomDatetimeField desc&#x27;</span><span class="token plain"> -psa</span></div></div></div></div></div><p>To list only open workflows, add <code>CloseTime = missing</code> to the end of the query.</p><p>Note that queries can support more than one type of filter:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --ns samples-namespace wf list -q </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;WorkflowType = &quot;main.Workflow&quot; and (WorkflowId = &quot;1645a588-4772-4dab-b276-5f9db108b3a8&quot; or RunId = &quot;be66519b-5f09-40cd-b2e8-20e4106244dc&quot;)&#x27;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">tctl --ns samples-namespace wf list -q </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;WorkflowType = &quot;main.Workflow&quot; StartTime &gt; &quot;2019-06-07T16:46:34-08:00&quot; and CloseTime = missing&#x27;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="web-ui-support"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#web-ui-support" title="Direct link to heading">#</a>Web UI Support</h3><p>Queries are supported in <a href="https://github.com/temporalio/temporal-web">Temporal Web</a> as of release 0.20.0. Use the &quot;Basic/Advanced&quot; button to switch to &quot;Advanced&quot; mode and type the query in the search box.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="local-testing"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-testing" title="Direct link to heading">#</a>Local Testing</h2><ol><li>Increase Docker memory to higher than 6GB. Navigate to Docker -&gt; Preferences -&gt; Advanced -&gt; Memory</li><li>Get the Temporal Docker compose file. Run <code>curl -L https://github.com/temporalio/temporal/releases/download/v0.21.1/docker.tar.gz | tar -xz --strip-components 1 docker/docker-compose-es.yml</code></li><li>Start Temporal Docker (which contains Apache Kafka, Apache Zookeeper, and Elasticsearch) using <code>docker-compose -f docker-compose-es.yml up</code></li><li>From the Docker output log, make sure Elasticsearch and Temporal started correctly. If you encounter an insufficient disk space error, try <code>docker system prune -a --volumes</code></li><li>Register a local namespace and start using it. <code>tctl --ns samples-namespace n re</code></li><li>Allow list search attributes. <code>tctl --ns namespace adm cl asa --search_attr_key NewKey --search_attr_type 1</code></li></ol><p>Note: starting a workflow with search attributes but without Elasticsearch will succeed as normal, but will not be searchable and will not be shown in list results.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/temporalio/temporal-documentation-legacy-v2/blob/master/docs/learn-workflow-filtering.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/learn-cross-dc-replication"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">« Cross-DC Replication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/java-quick-start"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Quick Start »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#memo-vs-search-attributes" class="contents__link">Memo vs Search Attributes</a></li><li><a href="#search-attributes-go-client-usage" class="contents__link">Search Attributes (Go Client Usage)</a><ul><li><a href="#allow-listing-search-attributes" class="contents__link">Allow Listing Search Attributes</a></li><li><a href="#value-types" class="contents__link">Value Types</a></li><li><a href="#limit" class="contents__link">Limit</a></li><li><a href="#upsert-search-attributes-in-workflow" class="contents__link">Upsert Search Attributes in Workflow</a></li><li><a href="#continueasnew-and-cron" class="contents__link">ContinueAsNew and Cron</a></li></ul></li><li><a href="#query-capabilities" class="contents__link">Query Capabilities</a><ul><li><a href="#supported-operators" class="contents__link">Supported Operators</a></li><li><a href="#default-attributes" class="contents__link">Default Attributes</a></li><li><a href="#general-notes-about-queries" class="contents__link">General Notes About Queries</a></li></ul></li><li><a href="#tools-support" class="contents__link">Tools Support</a><ul><li><a href="#cli" class="contents__link">CLI</a></li><li><a href="#web-ui-support" class="contents__link">Web UI Support</a></li></ul></li><li><a href="#local-testing" class="contents__link">Local Testing</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/java-quick-start">Java SDK</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/go-quick-start">Go SDK</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://stackoverflow.com/questions/tagged/temporal-workflow">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://join.slack.com/t/temporalio/shared_invite/zt-c1e99p8g-beF7~ZZW2HP6gGStXD8Nuw">Slack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/temporalio/temporal">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Temporal Technologies Inc.  All rights reserved. Copyright © 2020 Uber Technologies, Inc.</div></div></div></footer>
</div>

<script src="/styles.2e8c563f.js"></script>

<script src="/runtime~main.58e15fa6.js"></script>

<script src="/main.86236126.js"></script>

<script src="/1.56a960ad.js"></script>

<script src="/2.baf85c20.js"></script>

<script src="/3.f2c34b4a.js"></script>

<script src="/1be78505.8ca3838c.js"></script>

<script src="/20ac7829.55ca918f.js"></script>

<script src="/17896441.3aca8210.js"></script>

<script src="/7ada7aca.0717089f.js"></script>


</body>
</html>